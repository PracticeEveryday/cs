## Three Way Handshake

TCP í†µì‹ ì€ ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ëŠ” `ì—°ê²° ì§€í–¥í˜• í”„ë¡œí† ì½œ`ì´ë‹¤.   
TCP ì•ˆì „í•œ í†µì‹ ì„ ìœ„í•´ ì—°ê²°ì´ ì„±ë¦½ë˜í•˜ê¸° ìœ„í•œ ì„ í–‰ ì‘ì—…ì´ ìˆë‹¤.   

> ğŸ¤” ì‹ ë¢°ê°€ ë³´ì¥ëœë‹¤?
> 
> 1. ìƒëŒ€ë°©ì—ê²Œ íŒ¨í‚· ì „ë‹¬ì´ ê°€ëŠ¥í•˜ë‹¤.   
> 2. ìƒëŒ€ë°©ìœ¼ë¡œë¶€í„° íŒ¨í‚·ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.
> 
> -  SYN í”Œë˜ê·¸ << ì—°ê²° í•©ì‹œë‹¤! ìš”ì²­
> - ACK í”Œë˜ê·¸ << ì˜¤ì¼€ì´ ì—°ê²° ë˜ì—ˆìŠµë‹ˆë‹¤! ì—°ê²° ì—¬ë¶€ ì•Œë ¤ ì¤Œ

ì•ˆì „í•œ í†µì‹ ì„ ìœ„í•´ì„œ ì„œë¡œ ì–¼ë§ˆë§Œí¼ì˜ ë°ì´í„°ë¥¼ `ì†¡ìˆ˜ì‹  ë° ì²˜ë¦¬`ê°€ ê°€ëŠ¥í•œ ì§€ ì•Œì•„ì•¼ í•œë‹¤.   
3-way handshake ê³¼ì •ì„ í†µí•´ ìœˆë„ìš° ì‚¬ì´ì¦ˆì™€ MMS(Maximum Segment Size)ë¥¼ ê²°ì •í•œë‹¤.

![image](https://github.com/user-attachments/assets/6bfeb124-0a38-4e38-b1e0-2bb86ad836e3)

1. ì†¡ì‹ ì ì¸¡ì—ì„œ íŒ¨í‚·ì˜ SYN ê°’ì„ 1ë¡œ ì„¤ì •í•˜ì—¬ ìˆ˜ì‹ ìì—ê²Œ ì „ì†¡í•œë‹¤. << ìµœì´ˆ SEQ ë²ˆí˜¸ëŠ” ì†¡ì‹ ìì˜ ìµœì´ˆ ìˆœì„œ ë²ˆí˜¸(ëœë¤ê°’)ì´ ì„¸íŒ…ëœë‹¤.
   - Application ë°ì´í„°ëŠ” í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤. 
2. ìˆ˜ì‹ ìëŠ” ì†¡ì‹ ìì˜ ACK ê°’ì„ SEQ + 1ë¡œ ì„¸íŒ…í•˜ê³  ì „ì†¡í•œë‹¤ << SEQ ë²ˆí˜¸ëŠ” ìˆ˜ì‹ ìì˜ ìµœì´ˆ ìˆœì„œ ë²ˆí˜¸(ëœë¤ê°’)ì´ ì„¸íŒ…ëœë‹¤.
3. ì†¡ì‹ ìëŠ” SEQ + 1 ê°’ì„ ACKì— ì„¸íŒ…í•˜ì—¬ ë³´ë‚¸ë‹¤.
   - SYNbitëŠ” 0ìœ¼ë¡œ ì„¤ì •í•œë‹¤. 

ìœ„ 3 ê³¼ì •ì„ ê±°ì¹˜ë©´ ì‹ ë¢°ì„± ìˆëŠ” ì—°ê²°ì´ ë³´ì¥ëœë‹¤!

> Three-Way Handshakeì˜ ì„œë²„ ìƒíƒœëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

![image](https://github.com/user-attachments/assets/2dc3bac2-1982-410b-be8e-682b9a03a6d0)

LISTEN << Server: TCP ì—°ê²°ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘ì…ë‹ˆë‹¤.   
SYS-SENT << Client: ì—°ê²° ìš”ì²­ì„ ë³´ë‚¸ í›„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘ì…ë‹ˆë‹¤.   
SYN-RECEIVED << Server: ì—°ê²° ìš”ì²­ì„ ìˆ˜ì‹ í•œ í›„ ì—°ê²° ìš”ì²­ì„ ë³´ë‚¸ í›„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘ì…ë‹ˆë‹¤.   
ESTABLISHED << Server And Client: ì—°ê²°ì´ ì—´ë ¤ ìˆìœ¼ë©´ ìˆ˜ì‹ ëœ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ì „ì†¡ ë‹¨ê³„ì—ì„œ ì •ìƒ ìƒíƒœì…ë‹ˆë‹¤.

### ğŸ¤” ì™œ ì„¸ë²ˆì„ ê±°ì³ì•¼í• ê¹Œ? Two Way Handshake

![image](https://github.com/user-attachments/assets/a4d2731a-605f-466d-97d7-96a87853b93e)

`ACK`ëŠ” ìŠ¹ì¸ í•„ë“œì´ë‹¤. ì¦‰, ACK íŒ¨í‚·ì„ ì „ë‹¬ ë°›ì•„ì•¼ë§Œ ìƒëŒ€ë°©ì—ê²Œ íŒ¨í‚·ì´ ì „ë‹¬ ê°€ëŠ¥í•´ ì§€ëŠ” ê²ƒì´ë‹¤.

`two way handshake`ì˜ ì£¼ìš” ì°¨ì´ì ì€ ì„œë²„ê°€ `ACK` íŒ¨í‚·ì„ ì „ë‹¬ë°›ì§€ ëª»í–ˆë‹¤ëŠ” ê²ƒì´ë‹¤.   
ì¦‰, í´ë¼ì´ì–¸íŠ¸ì—ê²Œ íŒ¨í‚·ì„ ì¤˜ë„ ë˜ëŠ” ì§€ ì•ˆë˜ëŠ” ì§€ í™•ì¸ì„ ë°›ì§€ ëª»í•œ ìƒí™©ì¸ ê²ƒì´ë‹¤.   
-> ì„œë²„ëŠ” íŒ¨í‚·ì„ ìƒëŒ€ë°©ì—ê²Œ ì „ë‹¬í•´ë„ ë˜ëŠ” ì§€ `ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ”` ìƒí™©ì´ ë˜ëŠ” ê²ƒì´ë‹¤!

+ ğŸ“ ì„œë²„ì˜ `ìµœì´ˆ ì„¸ê·¸ë¨¼íŠ¸ ìˆ«ì`(ISN Initial Sequence Number)ë¥¼ ì•Œ ìˆ˜ ì—†ë‹¤.   
-> ì´ë ‡ê²Œ ë˜ë©´ í´ë¼ì´ì–¸íŠ¸ì˜ ê²½ìš° ì „ë‹¬ ë°›ëŠ” ì„¸ê·¸ë¨¼íŠ¸ì˜ ìˆœì„œë¥¼ íŒŒì•…í•  ìˆ˜ ì—†ê²Œ ëœë‹¤!

> ğŸ“Œ ì¦‰, ì„œë²„ë„ í´ë¼ì´ì–¸íŠ¸ë„, ì†¡ì‹ ìë„ ìˆ˜ì‹ ìë„ ëª¨ë‘ SYNì™€ ACK í”Œë˜ê·¸ê°€ í™œì„±í™” ëœ íŒ¨í‚·ì„ ê¼­ í•œ ë²ˆ ì£¼ê³  ë°›ì•„ì•¼ ë˜ëŠ” ê²ƒì´ë‹¤!!

### ì°¸ê³  ìë£Œ
- [TCPë€? (3-Way handshake, 4-Way hanshake)](https://steadiness.dev/tcp-basics/)
- [TCP](https://en.wikipedia.org/wiki/Transmission_Control_Protocol)
- [3-Way Handshake](https://hojunking.tistory.com/106)
- [2-way handshakeëŠ” ì™œ ì•ˆë˜ëŠ”ë°!](https://velog.io/@yiseungyun/2-way-handshake%EB%8A%94-%EC%99%9C-%EC%95%88%EB%90%98%EB%8A%94%EB%8D%B0)